---
title: Qualitative Variables as Predictors
author: JSH
date: 2025-04-14 10:30:00 +0800
categories: [Study, Statistics]
tags: [Study, Statistics, Regression]
use_math: true
---

# Qualitative Variables as Predictors

## Variable types
Quantitative variable has a well-defined scale of measurement.

Qualitative variable (or categorical variables)
- Sometimes, it is necessary to use qualitative variables in a regression through “indicator(dummy) variables”

<!-- 명목형은 가변수 처리함. 순서형은 linear한 패턴이 나타나지 않으면 가변수 (indicator = dummy) 처리 -->

<!-- 순서형 자료 예를들어서 흡연을 10대, 20대, 30대로 구분할 때 
15, 25, 35로 양적변수처럼 코딩해서 회귀분석을 할 수도 있지만 사실 20대에서 피해가 제일 클 수도 있다.
이런 경우에는 이때도 가변수 사용해야 함 -->

## Interaction
<!-- 교호작용은 scale에 영향을 받는다. x1이 원래는 interaction이 있었는데 log scale에서는 없을 수도 있고 그런 특징이 있음 -->

<!-- 외삽을 하지말자 (주의해야 함! 교수님께서 여러번 설명하심)
회귀분석은 적합한 모형의 설명변수의 범위 내에서 이루어졌을 때만 유효하다. 
예를들어 x가 10~20 범위에서 분석되었는데 9인 새 데이터를 예측하는 데 활용하면 안됨 
교호작용이 평가한 조건에서는 최적이더라도 모든 조건에서 최적해가 아니라는 것도 같은 의미로 볼 수 있음
e.g.) 주식 예측. 현재까지의 데이터를 기반으로 미래 예측은 명백한 외삽. 얼마든지 패턴이 바뀔 수 있기 때문에 심각한 bias가 있을 수 있다.
-->
Effects that occur in combinations of two or more variables.
In other words, it means that the effect of each variable is different depending on the relative level (set value) between variables.

If there is an interaction, even if it is optimal in the evaluated conditions, it is not optimal in all conditions, and there is a risk of problems if it is used under conditions not evaluated.

### Model with interaction
Linear regression model: $y_i = \beta_0 + \beta_1 x_{1i} + \beta_2 x_{2i} + \epsilon_i$ where $\epsilon_i \sim N(0, \sigma^2)$ and $x_{2i}=0$ if male, $x_{2i}=1$ if female.

Then, $E(y) = \beta_0 + \beta_1 x_1 + \beta_2 x_2 = \left\{\begin{matrix} \beta_0 + \beta_1 x_1 \text{if male} \\ (\beta_0 + \beta_2) + \beta_1 x_1 \text{if female} \end{matrix}\right$

$\beta_2 = E(y \mid F, x_1 = x_1') - E(y \mid M, x_1 = x_1')$

However, we cannot be sure that the slope of the $E(y)$ straight line along $x_1$ is always the same.

If the difference between men and women ($2x$) varies depending on the score of $x_1$, then the slope is different.
A loss means that there is an interaction between $x_1$ and $x_2$.

Linear regression model: $y_i = \beta_0 + \beta_1 x_{1i} + \beta_2 x_{2i} + \beta_3 x_{1i} x_{2i} \epsilon_i$.

$\therefore E(y) = \left\{\begin{matrix} \beta_0 + \beta_1 x_1 \text{if male} \\ (\beta_0 + \beta_2) + (\beta_1 + \beta_3) x_1 \text{if female} \end{matrix}\right$
<!-- beta3가 slope의 차이가 된다 -->

## Qualitative variables with more than three level
When using indicator variables to represent a set of categories, the # of these variables required is one less than the # of categories.

<!-- 더미 변수를 카테고리 개수만큼 만들면 X'X가 singular가 되는 문제가 발생하므로, 하나 적게 만들어야 한다. 3개 타입의 카테고리가 존재하는 경우에는 2개의 더미 변수를 만드는 식.
그렇게 해도 가능한 모든 경우의 조합을 표현할 수 있다.
-->


### Model without interaction
$y = f(x_1, x_2) + \epsilon, x_2 = c1, c2, c3$.

$\therefore y_i = \beta_0 + \beta_1 x_{1i} + \beta_2 x_{2i} + \beta_3 x_{3i} + \epsilon_i$ 

$E(y) =$
* $(\beta_0 + \beta_2) + \beta_1 x_1$ for c1
* $(\beta_0 + \beta_3) + \beta_1 x_1$ for c2
* $\beta_0 + \beta_1 x_1$ for c3
The slope is the same, but only the intercept is different

$\beta_3 = E(y \mid c2) - E(y \mid c2)$

$\beta_3 - \beta_2 = E(y \mid c2) - E(y \mid c1)$

### Model with interaction
If you want to do both intercept and slope differently depending on c1, c2, c3.
That is, assuming that there may be an interaction between $x_1$ and $x_2$,

$y_i = \beta_0 + \beta_1 x_{1i} + \beta_2 x_{2i} + \beta_3 x_{3i} + \beta_4 x_{1i} x_{2i} + \beta5 x_{1i} x_{3i} + \epsilon_i$

$E(y \mid c1) = (\beta_0 + \beta_2) + (\beta_1 + \beta_4) x_1$

$E(y \mid c2) = (\beta_0 + \beta_3) + (\beta_1 + \beta_5) x_1$

$E(y \mid c3) = \beta_0 + \beta_1 x_1$

<!-- 이걸 기반으로 회귀 결과에서 어떤 beta값의 p-value가 유의할 때 무엇과 무엇의 차이가 유의하게 나타나는건지 해석할 수 있다. 잘 모르겠으면 12페이지 부분 강의 다시 확인 -->

<!-- 아웃라이어 제거 후 제거하지 않은 모델과 R^2 등 비교하려고 하면 샘플수가 달라지기 때문에 비교가 어렵다. adjusted R^2로 비교 x. -->



